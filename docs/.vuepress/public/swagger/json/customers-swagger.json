{"swagger":"2.0","info":{"version":"1.0.0","title":"Modyo public Realms API","description":"Describe Modyo public Realm API methods","termsOfService":"http://www.modyo.com/terms/","contact":{"name":"MODYO API Team"},"license":{"name":"MIT"}},"schemes":["https"],"basePath":"/api/customers","consumes":["application/json"],"produces":["application/json; charset=utf-8"],"paths":{"/realms/{realm_uid}/notifications":{"get":{"summary":"Profile notifications list","tags":["Notifications"],"parameters":[{"name":"realm_uid","in":"path","description":"Realm UID","required":true,"type":"string"},{"name":"opened","in":"query","description":"Select only opened or unopened notifications","type":"boolean","enum":[true,false]},{"name":"sort_by","description":"Sort by an attribute. If blank, results are sorted by date","in":"query","type":"string","enum":["id","opened","sent_at"]},{"name":"order","description":"Sort ascendant or descending","in":"query","type":"string","enum":["asc","desc"]},{"name":"page","description":"Pagination page","in":"query","type":"integer","minimum":1},{"name":"per_page","description":"Registers per page","in":"query","type":"integer","minimum":0}],"responses":{"200":{"description":"User notifications list","schema":{"properties":{"notifications":{"type":"array","items":{"$ref":"#/definitions/Notification"}},"meta":{"$ref":"#/definitions/PaginationMeta"}}}},"404":{"description":"Not found"}}}},"/realms/{realm_uid}/notifications/{id}/mark_as_read":{"put":{"summary":"Mark notification as read","tags":["Notifications"],"parameters":[{"name":"realm_uid","in":"path","description":"Realm UID","required":true,"type":"string"},{"name":"id","in":"path","description":"Notification Message Delivery ID","required":true,"type":"integer","format":"int64"}],"responses":{"200":{"description":"Ok"},"404":{"description":"Not found"}}}},"/realms/{realm_uid}/me":{"get":{"summary":"User info index","tags":["User Info"],"parameters":[{"name":"realm_uid","in":"path","description":"Realm UID","required":true,"type":"string"}],"responses":{"200":{"description":"User info","schema":{"$ref":"#/definitions/User"}},"404":{"description":"Not found"}}},"put":{"summary":"Update user info","tags":["User Info"],"parameters":[{"name":"user","in":"body","required":true,"schema":{"properties":{"email":{"type":"string","format":"email","example":"john@modyo.com"},"first_name":{"type":"string","example":"John"},"last_name":{"type":"string","example":"Doe"},"second_last_name":{"type":"string","example":""},"birth_at":{"type":"string","example":"1978-06-01"},"sex":{"type":"integer","enum":[0,1,3],"example":0,"description":"0: male, 1: female, 3: undefined"},"custom_fields":{"type":"array","items":{"properties":{"key":{"type":"string","example":"_ucf_single_line_text_user_custom_field"},"value":{"type":"string","example":"Single Line Text made by: Clifton"}}}}}}}],"responses":{"200":{"description":"User info","schema":{"$ref":"#/definitions/User"}},"404":{"description":"Not found"},"422":{"description":"Unprocessable Entity"}}}},"/realms/{realm_uid}/delivery_token":{"get":{"summary":"Delivery token","tags":["User Info"],"parameters":[{"name":"realm_uid","in":"path","description":"Realm UID","required":true,"type":"string"}],"responses":{"200":{"description":"Delivery token","schema":{"properties":{"delivery_token":{"type":"string","example":"eyJhbGciOiJub25lIn0.eyJpc3MiOiJodHRwczovL3N0YXJrLm1vZHlvLm1lOjMwMDAvYXBpL3Byb2ZpbGUvZGVsaXZlcn"}}}},"404":{"description":"Not found"}}}},"/realms/{realm_uid}/avatar":{"post":{"summary":"Upload a user avatar","tags":["User Info"],"parameters":[{"name":"realm_uid","in":"path","description":"Realm UID","required":true,"type":"string"},{"name":"file","in":"formData","description":"Avatar binary","required":true,"type":"file"}],"responses":{"200":{"description":"Uploaded avatar info","schema":{"properties":{"id":{"type":"integer","example":394},"uuid":{"type":"string","example":"a8fcda3b-ef45-44a3-8868-5d43f04fc63a"},"name":{"type":"string","example":"example_avatar.jpg"},"size":{"type":"integer","example":78419},"url":{"type":"string","format":"uri","example":"//platform.modyo.me:3000/uploads/a8fcda3b-ef45-44a3-8868-5d43f04fc63a/original/example_avatar.jpg"}}}},"422":{"description":"Unprocessable Entity"}}}},"/realms/{realm_uid}/avatar/{uuid}":{"delete":{"summary":"Remove current user avatar","tags":["User Info"],"parameters":[{"name":"realm_uid","in":"path","description":"Realm UID","required":true,"type":"string"},{"name":"uuid","in":"path","description":"Avatar uuid","required":true,"type":"string"}],"responses":{"200":{"description":"Ok"},"422":{"description":"Unprocessable Entity"}}}},"/realms/{realm_uid}/events":{"post":{"summary":"Create an Event","tags":["Events"],"parameters":[{"name":"realm_uid","in":"path","description":"Realm UID","required":true,"type":"string"},{"name":"event","in":"body","required":true,"schema":{"$ref":"#/definitions/EventInput"}}],"responses":{"201":{"description":"Created","schema":{"$ref":"#/definitions/Log"}},"400":{"description":"Bad Request"}}}}},"definitions":{"PaginationMeta":{"properties":{"total_entries":{"type":"integer","minimum":0,"example":2},"per_page":{"type":"integer","minimum":0,"example":10},"current_page":{"type":"integer","minimum":1,"example":1},"total_pages":{"type":"integer","minimum":1,"example":1}}},"Notification":{"properties":{"id":{"type":"integer","minimum":1,"example":475},"opened":{"type":"boolean","enum":[true,false],"example":false},"subject":{"type":"string","example":"Check this new feature!"},"message":{"type":"string","format":"html","example":"\u003cb\u003eHi!\u003c/b\u003e This is a test notification message"},"sent_at":{"type":"string","format":"date-time","example":"2019-10-22T19:21:57.000Z"}}},"Avatar":{"properties":{"id":{"type":"integer","example":100},"file_name":{"type":"string","example":"user_avatar.png"},"url_original":{"type":"string","format":"uri","example":"https://stark.modyo.me:3000/assets/avatar/user_avatar_original.png"},"url_small":{"type":"string","format":"uri","example":"https://stark.modyo.me:3000/assets/avatar/user_avatar_small.png"},"url_medium":{"type":"string","format":"uri","example":"https://stark.modyo.me:3000/assets/avatar/user_avatar_medium.png"}}},"TargetSummary":{"properties":{"id":{"type":"integer","example":4},"name":{"type":"string","example":"Seniors (65+)"}}},"UserCustomField":{"properties":{"key":{"type":"string","example":"_ucf_single_line_text_user_custom_field"},"name":{"type":"string","example":"Single Line Text User Custom Field"},"type":{"type":"string","example":"string"},"value":{"type":"string","example":"Single Line Text made by: Clifton"}}},"UserCustomFieldValueInput":{"properties":{"key":{"type":"string","example":"_ucf_single_line_text_user_custom_field"},"value":{"type":"string","example":"Some string value"}}},"User":{"properties":{"avatar":{"$ref":"#/definitions/Avatar"},"id":{"type":"integer","example":2332},"external_id":{"type":"string","example":"11111111-1"},"name":{"type":"string","example":"Clifton Feil"},"first_name":{"type":"string","example":"Clifton"},"last_name":{"type":"string","example":"Feil"},"second_last_name":{"type":"string","example":"Smith"},"email":{"type":"string","format":"email","example":"test.user@modyo.com"},"username":{"type":"string","format":"username","example":"test.user"},"url":{"type":"string","format":"uri","example":"https://stark.modyo.me:3000/admin/users/283d2baa-c3e1-4a8c-91d7-752aea8937ab"},"sex":{"type":"string","example":0,"enum":[0,1,3]},"birth_at":{"type":"string","example":"1952-09-04"},"active":{"type":"boolean","example":true,"enum":[true,false]},"created_at":{"type":"string","format":"date-time","example":"2019-10-08T16:08:55.000-03:00"},"updated_at":{"type":"string","format":"date-time","example":"2019-10-23T18:30:19.000-03:0"},"last_login_at":{"type":"string","format":"date-time","example":"2019-10-22T20:40:35.000Z"},"targets":{"type":"array","items":{"$ref":"#/definitions/TargetSummary"}},"last_login_ip":{"type":"string","format":"ipv4","example":"127.0.0.1"},"custom_fields":{"type":"array","items":{"$ref":"#/definitions/UserCustomField"}},"tags":{"type":"string","example":"tag1,tag2,tag3"},"login_count":{"type":"integer","example":31},"verified":{"type":"boolean","example":true,"enum":[true,false]},"delegated_token":{"$ref":"#/definitions/DelegatedToken"}}},"DelegatedToken":{"properties":{"uuid":{"type":"string"},"access_token":{"type":"string"},"access_token_expires_in":{"type":"integer"},"access_token_expires_in_datetime":{"type":"string"}}},"EventInput":{"properties":{"log_type_id":{"type":"string","example":"promotion_clicked"},"site_id":{"type":"string","example":"17ed81c5-8051-4786-9c62-4f45f0a1901f"},"value_1":{"type":"string","example":"Custom value 1"},"value_2":{"type":"string","example":"Custom value 2"},"value_3":{"type":"string","example":"Custom value 3"},"options":{"type":"object","example":{"title":"Promotion 1"}}}},"Log":{"properties":{"id":{"type":"integer","example":26826},"value_1":{"type":"string"},"value_2":{"type":"string"},"value_3":{"type":"string"},"options":{"type":"object","example":{"title":"Promotion 1"}},"created_at":{"type":"string","format":"date-time","example":"2020-02-06T12:20:29.000-03:00"}}}}}